{"remainingRequest":"/Volumes/Document/Pau's test/pau's test FE/node_modules/babel-loader/lib/index.js!/Volumes/Document/Pau's test/pau's test FE/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Volumes/Document/Pau's test/pau's test FE/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/Document/Pau's test/pau's test FE/src/modules/home/_components/collection/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/Document/Pau's test/pau's test FE/src/modules/home/_components/collection/index.vue","mtime":1553226575198},{"path":"/Volumes/Document/Pau's test/pau's test FE/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/Document/Pau's test/pau's test FE/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/Document/Pau's test/pau's test FE/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/Document/Pau's test/pau's test FE/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.array.find-index\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Volumes/Document/Pau's test/pau's test FE/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport \"core-js/modules/es6.array.find\";\nimport _Promise from \"/Volumes/Document/Pau's test/pau's test FE/node_modules/@babel/runtime-corejs2/core-js/promise\";\nimport _parseInt from \"/Volumes/Document/Pau's test/pau's test FE/node_modules/@babel/runtime-corejs2/core-js/parse-int\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es6.array.sort\";\nimport _objectSpread from \"/Volumes/Document/Pau's test/pau's test FE/node_modules/@babel/runtime-corejs2/helpers/esm/objectSpread\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport ProductEmpty from '../partials/product-empty';\nimport ProductLoading from '../partials/product-loading';\nimport ListProducts from '../partials/list-products';\nimport AppSidebar from '../partials/sidebar';\nimport TabFilterRouter from '../partials/tab-filter-router';\nimport { mapGetters } from 'vuex';\nimport helper from '@/plugins/helper';\nimport Pagination from '@/components/pagination';\nimport error from '@/components/error-404';\nimport breadcrumb from '../partials/collection-breadcrumb';\nexport default {\n  name: 'Collections',\n  components: {\n    AppSidebar: AppSidebar,\n    TabFilterRouter: TabFilterRouter,\n    ListProducts: ListProducts,\n    Pagination: Pagination,\n    ProductEmpty: ProductEmpty,\n    ProductLoading: ProductLoading,\n    error: error,\n    breadcrumb: breadcrumb\n  },\n  metaInfo: function metaInfo() {\n    return {\n      title: this.meta.title\n    };\n  },\n  data: function data() {\n    return {\n      isLoading: false,\n      sortables: ['last', 'trending', 'price'],\n      collection_id: '',\n      products: [],\n      default_sort: 'last',\n      meta: {\n        title: 'All Collections'\n      },\n      pagination: {\n        limit: 20,\n        total: 0,\n        total_page: 0,\n        current_page: 1\n      },\n      error: false,\n      selectedCollection: null\n    };\n  },\n  computed: _objectSpread({}, mapGetters({\n    collections: '$_Home/getCollections',\n    countries: '$_Home/getCountries'\n  }), {\n    cumputeCollection: function cumputeCollection() {\n      var collection_id = this.$route.params.id ? this.$route.params.id : null;\n\n      if (collection_id) {\n        collection_id = this.getSlugId(collection_id);\n        var collection = helper.findDeep(this.collections, 'id', function (item, id) {\n          return id == collection_id;\n        });\n\n        if (collection) {\n          if (collection.level == 1) {\n            return {\n              title: [{\n                id: collection.id,\n                title: collection.title\n              }],\n              list: collection.childs,\n              selected: collection.title,\n              hasChild: collection.childs ? true : false\n            };\n          } else if (collection.level == 2) {\n            var object = {\n              title: [],\n              list: [],\n              selected: collection.title,\n              hasChild: collection.childs ? true : false\n            };\n            var level1 = helper.findDeep(this.collections, 'id', function (item, id) {\n              return id == collection.parent_id;\n            });\n\n            if (level1) {\n              object.title.push({\n                id: level1.id,\n                title: level1.title\n              });\n            }\n\n            object.title.push({\n              id: collection.id,\n              title: collection.title\n            });\n\n            if (collection.childs) {\n              object.list = collection.childs;\n            }\n\n            return object;\n          } else if (collection.level == 3) {\n            var object = {\n              title: [],\n              list: [],\n              selected: collection.title,\n              hasChild: collection.childs ? true : false\n            };\n            var level2 = helper.findDeep(this.collections, 'id', function (item, id) {\n              return id == collection.parent_id;\n            });\n\n            if (level2) {\n              var level1 = helper.findDeep(this.collections, 'id', function (item, id) {\n                return id == level2.parent_id;\n              });\n\n              if (level1) {\n                object.title.push({\n                  id: level1.id,\n                  title: level1.title\n                });\n              }\n\n              object.title.push({\n                id: level2.id,\n                title: level2.title\n              });\n            }\n\n            object.title.push({\n              id: collection.id,\n              title: collection.title\n            });\n            return object;\n          }\n        }\n      } else {\n        return {\n          title: [],\n          list: this.collections,\n          selected: null,\n          hasChild: true\n        };\n      }\n    }\n  }),\n  methods: {\n    getProduct: function getProduct() {\n      var _this = this;\n\n      var to = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\n      if (to == null) {\n        to = this.$route;\n      }\n\n      var sort = to.query.sort ? to.query.sort : null;\n      sort = this.checkSort(sort) ? sort : this.default_sort;\n      /* get current_page */\n\n      var page = to.query.page ? to.query.page : 1;\n\n      if (page) {\n        page = helper.isNumeric(page) ? page : 1;\n      }\n      /* get collection_id */\n\n\n      var collection_id = to.params.id ? to.params.id : null;\n\n      if (collection_id) {\n        collection_id = this.getSlugId(collection_id);\n        var collection = helper.findDeep(this.collections, 'id', function (item, id) {\n          return id == collection_id;\n        });\n\n        if (collection) {\n          this.setMeta(collection);\n        } else {// this.error = true\n          // return;\n        }\n      }\n      /* get supplier_id */\n\n\n      var supplier_id = to.query.supplier_id ? to.query.supplier_id : null;\n\n      if (supplier_id) {\n        supplier_id = this.checkSupplier(supplier_id) ? supplier_id : null;\n      }\n      /* get shipping_from */\n\n\n      var shipping_from = to.query.shipping_from ? to.query.shipping_from : null;\n\n      if (shipping_from) {\n        shipping_from = this.checkCountry(shipping_from) ? shipping_from : null;\n      }\n      /* get shipping_to */\n\n\n      var shipping_to = to.query.shipping_to ? to.query.shipping_to : null;\n\n      if (shipping_to) {\n        shipping_to = this.checkCountry(shipping_to) ? shipping_to : null;\n      }\n      /* get prices */\n\n\n      var prices = null;\n      var price = to.query.prices;\n\n      if (price) {\n        var temp = price.split('-');\n\n        if (temp.length == 2) {\n          var min = temp[0].trim();\n          var max = temp[1].trim();\n\n          if (helper.isNumeric(min) && helper.isNumeric(max) && _parseInt(min) <= _parseInt(max)) {\n            prices = price;\n          }\n        }\n      }\n\n      return new _Promise(function (resolve, reject) {\n        _this.$store.dispatch('$_Home/GET_LIST_PRODUCTS', {\n          sort: sort,\n          collection_id: collection_id,\n          page: page,\n          supplier_id: supplier_id,\n          shipping_from: shipping_from,\n          shipping_to: shipping_to,\n          prices: prices,\n          limit: _this.pagination.limit\n        }).then(function (res) {\n          var status = res.status,\n              data = res.data,\n              pagination = res.pagination;\n\n          if (status) {\n            _this.products = data;\n            _this.pagination.total = _parseInt(pagination.total);\n            _this.pagination.total_page = _parseInt(pagination.total_page);\n            _this.pagination.current_page = _parseInt(pagination.current_page);\n          }\n        });\n\n        resolve();\n      });\n    },\n    checkCountry: function checkCountry(code) {\n      return _.find(this.countries, {\n        code: code\n      }) != undefined;\n    },\n    checkSupplier: function checkSupplier(id) {\n      return _.find(this.suppliers, {\n        id: id\n      }) != undefined;\n    },\n    checkSort: function checkSort(sort) {\n      return this.sortables.indexOf(sort) >= 0;\n    },\n    setMeta: function setMeta(collection) {\n      if (collection) {\n        this.meta.title = collection.title;\n      }\n    }\n  },\n  beforeRouteUpdate: function () {\n    var _beforeRouteUpdate = _asyncToGenerator(\n    /*#__PURE__*/\n    regeneratorRuntime.mark(function _callee(to, from, next) {\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              this.isLoading = true;\n              _context.next = 3;\n              return this.getProduct(to);\n\n            case 3:\n              this.isLoading = false;\n              next();\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    function beforeRouteUpdate(_x, _x2, _x3) {\n      return _beforeRouteUpdate.apply(this, arguments);\n    }\n\n    return beforeRouteUpdate;\n  }(),\n  created: function () {\n    var _created = _asyncToGenerator(\n    /*#__PURE__*/\n    regeneratorRuntime.mark(function _callee2() {\n      var to, collection_id, findIndex, more, index, collection, child;\n      return regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              this.isLoading = true;\n              to = this.$route;\n              collection_id = this.getSlugId(to.params.id);\n              findIndex = _.findIndex(this.collections, {\n                id: collection_id\n              });\n\n              if (!(findIndex >= 0)) {\n                _context2.next = 9;\n                break;\n              }\n\n              more = findIndex >= 10 ? true : false;\n              this.$store.commit('$_Home/UPDATE_SIDEBAR_OPTION', {\n                collection_id: '',\n                more: more\n              });\n              _context2.next = 20;\n              break;\n\n            case 9:\n              index = 0;\n\n            case 10:\n              if (!(index < this.collections.length)) {\n                _context2.next = 20;\n                break;\n              }\n\n              collection = this.collections[index];\n              child = _.find(collection.childs, {\n                id: collection_id\n              });\n\n              if (!child) {\n                _context2.next = 17;\n                break;\n              }\n\n              more = index >= 10 ? true : false;\n              this.$store.commit('$_Home/UPDATE_SIDEBAR_OPTION', {\n                collection_id: child.parent_id,\n                more: more\n              });\n              return _context2.abrupt(\"break\", 20);\n\n            case 17:\n              index++;\n              _context2.next = 10;\n              break;\n\n            case 20:\n              this.$store.commit('$_Home/UPDATE_SIDEBAR_OPTION', {\n                collection_id: '',\n                more: false\n              });\n              _context2.next = 23;\n              return this.getProduct(this.$route);\n\n            case 23:\n              this.isLoading = false;\n\n            case 24:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, this);\n    }));\n\n    function created() {\n      return _created.apply(this, arguments);\n    }\n\n    return created;\n  }()\n};",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4DA,OAAA,YAAA,MAAA,2BAAA;AACA,OAAA,cAAA,MAAA,6BAAA;AACA,OAAA,YAAA,MAAA,2BAAA;AACA,OAAA,UAAA,MAAA,qBAAA;AACA,OAAA,eAAA,MAAA,+BAAA;AACA,SAAA,UAAA,QAAA,MAAA;AACA,OAAA,MAAA,MAAA,kBAAA;AACA,OAAA,UAAA,MAAA,yBAAA;AACA,OAAA,KAAA,MAAA,wBAAA;AACA,OAAA,UAAA,MAAA,mCAAA;AACA,eAAA;AACA,EAAA,IAAA,EAAA,aADA;AAEA,EAAA,UAAA,EAAA;AACA,IAAA,UAAA,EAAA,UADA;AACA,IAAA,eAAA,EAAA,eADA;AACA,IAAA,YAAA,EAAA,YADA;AACA,IAAA,UAAA,EAAA,UADA;AACA,IAAA,YAAA,EAAA,YADA;AACA,IAAA,cAAA,EAAA,cADA;AACA,IAAA,KAAA,EAAA,KADA;AACA,IAAA,UAAA,EAAA;AADA,GAFA;AAKA,EAAA,QALA,sBAKA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,KAAA,IAAA,CAAA;AADA,KAAA;AAGA,GATA;AAUA,EAAA,IAVA,kBAUA;AACA,WAAA;AACA,MAAA,SAAA,EAAA,KADA;AAEA,MAAA,SAAA,EAAA,CAAA,MAAA,EAAA,UAAA,EAAA,OAAA,CAFA;AAGA,MAAA,aAAA,EAAA,EAHA;AAIA,MAAA,QAAA,EAAA,EAJA;AAKA,MAAA,YAAA,EAAA,MALA;AAMA,MAAA,IAAA,EAAA;AACA,QAAA,KAAA,EAAA;AADA,OANA;AASA,MAAA,UAAA,EAAA;AACA,QAAA,KAAA,EAAA,EADA;AAEA,QAAA,KAAA,EAAA,CAFA;AAGA,QAAA,UAAA,EAAA,CAHA;AAIA,QAAA,YAAA,EAAA;AAJA,OATA;AAeA,MAAA,KAAA,EAAA,KAfA;AAgBA,MAAA,kBAAA,EAAA;AAhBA,KAAA;AAkBA,GA7BA;AA8BA,EAAA,QAAA,oBACA,UAAA,CAAA;AACA,IAAA,WAAA,EAAA,uBADA;AAEA,IAAA,SAAA,EAAA;AAFA,GAAA,CADA;AAKA,IAAA,iBALA,+BAKA;AACA,UAAA,aAAA,GAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EAAA,GAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EAAA,GAAA,IAAA;;AACA,UAAA,aAAA,EAAA;AACA,QAAA,aAAA,GAAA,KAAA,SAAA,CAAA,aAAA,CAAA;AACA,YAAA,UAAA,GAAA,MAAA,CAAA,QAAA,CAAA,KAAA,WAAA,EAAA,IAAA,EAAA,UAAA,IAAA,EAAA,EAAA;AAAA,iBAAA,EAAA,IAAA,aAAA;AAAA,SAAA,CAAA;;AACA,YAAA,UAAA,EAAA;AACA,cAAA,UAAA,CAAA,KAAA,IAAA,CAAA,EAAA;AACA,mBAAA;AACA,cAAA,KAAA,EAAA,CACA;AACA,gBAAA,EAAA,EAAA,UAAA,CAAA,EADA;AAEA,gBAAA,KAAA,EAAA,UAAA,CAAA;AAFA,eADA,CADA;AAOA,cAAA,IAAA,EAAA,UAAA,CAAA,MAPA;AAQA,cAAA,QAAA,EAAA,UAAA,CAAA,KARA;AASA,cAAA,QAAA,EAAA,UAAA,CAAA,MAAA,GAAA,IAAA,GAAA;AATA,aAAA;AAWA,WAZA,MAYA,IAAA,UAAA,CAAA,KAAA,IAAA,CAAA,EAAA;AACA,gBAAA,MAAA,GAAA;AACA,cAAA,KAAA,EAAA,EADA;AAEA,cAAA,IAAA,EAAA,EAFA;AAGA,cAAA,QAAA,EAAA,UAAA,CAAA,KAHA;AAIA,cAAA,QAAA,EAAA,UAAA,CAAA,MAAA,GAAA,IAAA,GAAA;AAJA,aAAA;AAMA,gBAAA,MAAA,GAAA,MAAA,CAAA,QAAA,CAAA,KAAA,WAAA,EAAA,IAAA,EAAA,UAAA,IAAA,EAAA,EAAA;AAAA,qBAAA,EAAA,IAAA,UAAA,CAAA,SAAA;AAAA,aAAA,CAAA;;AACA,gBAAA,MAAA,EAAA;AACA,cAAA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA;AACA,gBAAA,EAAA,EAAA,MAAA,CAAA,EADA;AAEA,gBAAA,KAAA,EAAA,MAAA,CAAA;AAFA,eAAA;AAIA;;AACA,YAAA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA;AACA,cAAA,EAAA,EAAA,UAAA,CAAA,EADA;AAEA,cAAA,KAAA,EAAA,UAAA,CAAA;AAFA,aAAA;;AAIA,gBAAA,UAAA,CAAA,MAAA,EAAA;AACA,cAAA,MAAA,CAAA,IAAA,GAAA,UAAA,CAAA,MAAA;AACA;;AACA,mBAAA,MAAA;AACA,WAtBA,MAsBA,IAAA,UAAA,CAAA,KAAA,IAAA,CAAA,EAAA;AACA,gBAAA,MAAA,GAAA;AACA,cAAA,KAAA,EAAA,EADA;AAEA,cAAA,IAAA,EAAA,EAFA;AAGA,cAAA,QAAA,EAAA,UAAA,CAAA,KAHA;AAIA,cAAA,QAAA,EAAA,UAAA,CAAA,MAAA,GAAA,IAAA,GAAA;AAJA,aAAA;AAMA,gBAAA,MAAA,GAAA,MAAA,CAAA,QAAA,CAAA,KAAA,WAAA,EAAA,IAAA,EAAA,UAAA,IAAA,EAAA,EAAA;AAAA,qBAAA,EAAA,IAAA,UAAA,CAAA,SAAA;AAAA,aAAA,CAAA;;AACA,gBAAA,MAAA,EAAA;AACA,kBAAA,MAAA,GAAA,MAAA,CAAA,QAAA,CAAA,KAAA,WAAA,EAAA,IAAA,EAAA,UAAA,IAAA,EAAA,EAAA;AAAA,uBAAA,EAAA,IAAA,MAAA,CAAA,SAAA;AAAA,eAAA,CAAA;;AACA,kBAAA,MAAA,EAAA;AACA,gBAAA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA;AACA,kBAAA,EAAA,EAAA,MAAA,CAAA,EADA;AAEA,kBAAA,KAAA,EAAA,MAAA,CAAA;AAFA,iBAAA;AAIA;;AACA,cAAA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA;AACA,gBAAA,EAAA,EAAA,MAAA,CAAA,EADA;AAEA,gBAAA,KAAA,EAAA,MAAA,CAAA;AAFA,eAAA;AAIA;;AACA,YAAA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA;AACA,cAAA,EAAA,EAAA,UAAA,CAAA,EADA;AAEA,cAAA,KAAA,EAAA,UAAA,CAAA;AAFA,aAAA;AAIA,mBAAA,MAAA;AACA;AAEA;AACA,OAnEA,MAmEA;AACA,eAAA;AACA,UAAA,KAAA,EAAA,EADA;AAEA,UAAA,IAAA,EAAA,KAAA,WAFA;AAGA,UAAA,QAAA,EAAA,IAHA;AAIA,UAAA,QAAA,EAAA;AAJA,SAAA;AAMA;AACA;AAlFA,IA9BA;AAkHA,EAAA,OAAA,EAAA;AACA,IAAA,UADA,wBACA;AAAA;;AAAA,UAAA,EAAA,uEAAA,IAAA;;AACA,UAAA,EAAA,IAAA,IAAA,EAAA;AACA,QAAA,EAAA,GAAA,KAAA,MAAA;AACA;;AACA,UAAA,IAAA,GAAA,EAAA,CAAA,KAAA,CAAA,IAAA,GAAA,EAAA,CAAA,KAAA,CAAA,IAAA,GAAA,IAAA;AACA,MAAA,IAAA,GAAA,KAAA,SAAA,CAAA,IAAA,IAAA,IAAA,GAAA,KAAA,YAAA;AACA;;AACA,UAAA,IAAA,GAAA,EAAA,CAAA,KAAA,CAAA,IAAA,GAAA,EAAA,CAAA,KAAA,CAAA,IAAA,GAAA,CAAA;;AACA,UAAA,IAAA,EAAA;AACA,QAAA,IAAA,GAAA,MAAA,CAAA,SAAA,CAAA,IAAA,IAAA,IAAA,GAAA,CAAA;AACA;AACA;;;AACA,UAAA,aAAA,GAAA,EAAA,CAAA,MAAA,CAAA,EAAA,GAAA,EAAA,CAAA,MAAA,CAAA,EAAA,GAAA,IAAA;;AACA,UAAA,aAAA,EAAA;AACA,QAAA,aAAA,GAAA,KAAA,SAAA,CAAA,aAAA,CAAA;AACA,YAAA,UAAA,GAAA,MAAA,CAAA,QAAA,CAAA,KAAA,WAAA,EAAA,IAAA,EAAA,UAAA,IAAA,EAAA,EAAA;AAAA,iBAAA,EAAA,IAAA,aAAA;AAAA,SAAA,CAAA;;AACA,YAAA,UAAA,EAAA;AACA,eAAA,OAAA,CAAA,UAAA;AACA,SAFA,MAEA,CACA;AACA;AACA;AACA;AACA;;;AACA,UAAA,WAAA,GAAA,EAAA,CAAA,KAAA,CAAA,WAAA,GAAA,EAAA,CAAA,KAAA,CAAA,WAAA,GAAA,IAAA;;AACA,UAAA,WAAA,EAAA;AACA,QAAA,WAAA,GAAA,KAAA,aAAA,CAAA,WAAA,IAAA,WAAA,GAAA,IAAA;AACA;AACA;;;AACA,UAAA,aAAA,GAAA,EAAA,CAAA,KAAA,CAAA,aAAA,GAAA,EAAA,CAAA,KAAA,CAAA,aAAA,GAAA,IAAA;;AACA,UAAA,aAAA,EAAA;AACA,QAAA,aAAA,GAAA,KAAA,YAAA,CAAA,aAAA,IAAA,aAAA,GAAA,IAAA;AACA;AACA;;;AACA,UAAA,WAAA,GAAA,EAAA,CAAA,KAAA,CAAA,WAAA,GAAA,EAAA,CAAA,KAAA,CAAA,WAAA,GAAA,IAAA;;AACA,UAAA,WAAA,EAAA;AACA,QAAA,WAAA,GAAA,KAAA,YAAA,CAAA,WAAA,IAAA,WAAA,GAAA,IAAA;AACA;AACA;;;AACA,UAAA,MAAA,GAAA,IAAA;AACA,UAAA,KAAA,GAAA,EAAA,CAAA,KAAA,CAAA,MAAA;;AACA,UAAA,KAAA,EAAA;AACA,YAAA,IAAA,GAAA,KAAA,CAAA,KAAA,CAAA,GAAA,CAAA;;AACA,YAAA,IAAA,CAAA,MAAA,IAAA,CAAA,EAAA;AACA,cAAA,GAAA,GAAA,IAAA,CAAA,CAAA,CAAA,CAAA,IAAA,EAAA;AACA,cAAA,GAAA,GAAA,IAAA,CAAA,CAAA,CAAA,CAAA,IAAA,EAAA;;AACA,cAAA,MAAA,CAAA,SAAA,CAAA,GAAA,KAAA,MAAA,CAAA,SAAA,CAAA,GAAA,CAAA,IAAA,UAAA,GAAA,KAAA,UAAA,GAAA,CAAA,EAAA;AACA,YAAA,MAAA,GAAA,KAAA;AACA;AACA;AACA;;AACA,aAAA,aAAA,UAAA,OAAA,EAAA,MAAA,EAAA;AACA,QAAA,KAAA,CAAA,MAAA,CAAA,QAAA,CAAA,0BAAA,EAAA;AACA,UAAA,IAAA,EAAA,IADA;AAEA,UAAA,aAAA,EAAA,aAFA;AAGA,UAAA,IAAA,EAAA,IAHA;AAIA,UAAA,WAAA,EAAA,WAJA;AAKA,UAAA,aAAA,EAAA,aALA;AAMA,UAAA,WAAA,EAAA,WANA;AAOA,UAAA,MAAA,EAAA,MAPA;AAQA,UAAA,KAAA,EAAA,KAAA,CAAA,UAAA,CAAA;AARA,SAAA,EASA,IATA,CASA,UAAA,GAAA,EAAA;AAAA,cACA,MADA,GACA,GADA,CACA,MADA;AAAA,cACA,IADA,GACA,GADA,CACA,IADA;AAAA,cACA,UADA,GACA,GADA,CACA,UADA;;AAEA,cAAA,MAAA,EAAA;AACA,YAAA,KAAA,CAAA,QAAA,GAAA,IAAA;AACA,YAAA,KAAA,CAAA,UAAA,CAAA,KAAA,GAAA,UAAA,UAAA,CAAA,KAAA,CAAA;AACA,YAAA,KAAA,CAAA,UAAA,CAAA,UAAA,GAAA,UAAA,UAAA,CAAA,UAAA,CAAA;AACA,YAAA,KAAA,CAAA,UAAA,CAAA,YAAA,GAAA,UAAA,UAAA,CAAA,YAAA,CAAA;AAEA;AACA,SAlBA;;AAmBA,QAAA,OAAA;AACA,OArBA,CAAA;AAsBA,KA1EA;AA2EA,IAAA,YA3EA,wBA2EA,IA3EA,EA2EA;AACA,aAAA,CAAA,CAAA,IAAA,CAAA,KAAA,SAAA,EAAA;AAAA,QAAA,IAAA,EAAA;AAAA,OAAA,KAAA,SAAA;AACA,KA7EA;AA8EA,IAAA,aA9EA,yBA8EA,EA9EA,EA8EA;AACA,aAAA,CAAA,CAAA,IAAA,CAAA,KAAA,SAAA,EAAA;AAAA,QAAA,EAAA,EAAA;AAAA,OAAA,KAAA,SAAA;AACA,KAhFA;AAiFA,IAAA,SAjFA,qBAiFA,IAjFA,EAiFA;AACA,aAAA,KAAA,SAAA,CAAA,OAAA,CAAA,IAAA,KAAA,CAAA;AACA,KAnFA;AAoFA,IAAA,OApFA,mBAoFA,UApFA,EAoFA;AACA,UAAA,UAAA,EAAA;AACA,aAAA,IAAA,CAAA,KAAA,GAAA,UAAA,CAAA,KAAA;AACA;AACA;AAxFA,GAlHA;AA4MA,EAAA,iBAAA;AAAA;AAAA;AAAA,4BAAA,iBAAA,EAAA,EAAA,IAAA,EAAA,IAAA;AAAA;AAAA;AAAA;AAAA;AACA,mBAAA,SAAA,GAAA,IAAA;AADA;AAAA,qBAEA,KAAA,UAAA,CAAA,EAAA,CAFA;;AAAA;AAGA,mBAAA,SAAA,GAAA,KAAA;AACA,cAAA,IAAA;;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,KA5MA;AAkNA,EAAA,OAAA;AAAA;AAAA;AAAA,4BAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,mBAAA,SAAA,GAAA,IAAA;AACA,cAAA,EAFA,GAEA,KAAA,MAFA;AAGA,cAAA,aAHA,GAGA,KAAA,SAAA,CAAA,EAAA,CAAA,MAAA,CAAA,EAAA,CAHA;AAIA,cAAA,SAJA,GAIA,CAAA,CAAA,SAAA,CAAA,KAAA,WAAA,EAAA;AAAA,gBAAA,EAAA,EAAA;AAAA,eAAA,CAJA;;AAAA,oBAKA,SAAA,IAAA,CALA;AAAA;AAAA;AAAA;;AAMA,cAAA,IANA,GAMA,SAAA,IAAA,EAAA,GAAA,IAAA,GAAA,KANA;AAOA,mBAAA,MAAA,CAAA,MAAA,CAAA,8BAAA,EAAA;AAAA,gBAAA,aAAA,EAAA,EAAA;AAAA,gBAAA,IAAA,EAAA;AAAA,eAAA;AAPA;AAAA;;AAAA;AASA,cAAA,KATA,GASA,CATA;;AAAA;AAAA,oBASA,KAAA,GAAA,KAAA,WAAA,CAAA,MATA;AAAA;AAAA;AAAA;;AAUA,cAAA,UAVA,GAUA,KAAA,WAAA,CAAA,KAAA,CAVA;AAWA,cAAA,KAXA,GAWA,CAAA,CAAA,IAAA,CAAA,UAAA,CAAA,MAAA,EAAA;AAAA,gBAAA,EAAA,EAAA;AAAA,eAAA,CAXA;;AAAA,mBAYA,KAZA;AAAA;AAAA;AAAA;;AAaA,cAAA,IAbA,GAaA,KAAA,IAAA,EAAA,GAAA,IAAA,GAAA,KAbA;AAcA,mBAAA,MAAA,CAAA,MAAA,CAAA,8BAAA,EAAA;AAAA,gBAAA,aAAA,EAAA,KAAA,CAAA,SAAA;AAAA,gBAAA,IAAA,EAAA;AAAA,eAAA;AAdA;;AAAA;AASA,cAAA,KAAA,EATA;AAAA;AAAA;;AAAA;AAmBA,mBAAA,MAAA,CAAA,MAAA,CAAA,8BAAA,EAAA;AAAA,gBAAA,aAAA,EAAA,EAAA;AAAA,gBAAA,IAAA,EAAA;AAAA,eAAA;AAnBA;AAAA,qBAoBA,KAAA,UAAA,CAAA,KAAA,MAAA,CApBA;;AAAA;AAqBA,mBAAA,SAAA,GAAA,KAAA;;AArBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAlNA,CAAA","sourcesContent":["<template>\n\t<div class=\"app-collection\">\n        \n            <transition name=\"fade-transform\" mode=\"out-in\">\n                <div class=\"app-collection-container\" v-if=\"error\" key=\"is-load-error\">\n                    <div class=\"container\">\n                        <div class=\"app-collection-row row\" >\n                            <div class=\"col col-12\">\n                                <error></error>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n                <div class=\"app-collection-container\" v-else key=\"is-load-success\">\n                    <div class=\"app-collection-container-breadcrumb\">\n                        <div class=\"container\">\n                            <div class=\"row\">\n                                <div class=\"col col-12\">\n                                    <breadcrumb :data=\"cumputeCollection.title\"></breadcrumb>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                    <div class=\"container p-b-30 p-t-30\">\n                        <div class=\"app-collection-row row\" >\n                            <div class=\"app-collection-col app-collection-col-sidebar col\">\n                                <app-sidebar :list=\"cumputeCollection\"></app-sidebar>\n                            </div>\n                            <div class=\"app-collection-col app-collection-col-content col\">\n                                <tab-filter-router></tab-filter-router>\n                                <transition name=\"fade-transform\" mode=\"out-in\">\n                                    <div class=\"row\" v-if=\"isLoading\" key=\"list-product-loading\">\n                                        <div class=\"col col-12\">\n                                            <product-loading :limit=\"pagination.limit\" col=\"col col-md-4 col-lg-3 m-b-30\"></product-loading>\n                                        </div>\n                                    </div>\n                                    <div  v-else key=\"row list-product-ready\">\n                                        <template v-if=\"products.length\">\n                                            <list-products :products=\"products\" col=\"col col-md-4 col-lg-3 m-b-30\" :has-banner=\"false\"></list-products>\n                                            <div class=\"text-center\">\n                                                <pagination v-model=\"pagination.current_page\" :total=\"pagination.total_page\"></pagination>\n                                            </div>\n                                        </template>\n                                        <template v-else>\n                                            <div class=\"col col-12 \">\n                                                <product-empty>\n                                                    <p>Sorry, we couldn't find any content </p>\n                                                </product-empty>\n                                            </div>\n                                        </template>\n                                    </div>\n                                </transition>\n                            </div>\n                        </div>\n                    </div>\n                 </div>\n            </transition>\n    </div>\n</template>\n<script>\n    import ProductEmpty from '../partials/product-empty'\n    import ProductLoading from '../partials/product-loading'\n    import ListProducts from '../partials/list-products'\n    import AppSidebar from '../partials/sidebar'\n    import TabFilterRouter from '../partials/tab-filter-router'\n    import { mapGetters } from 'vuex';\n    import helper from '@/plugins/helper'\n    import Pagination  from '@/components/pagination'\n    import error from '@/components/error-404'\n    import breadcrumb from '../partials/collection-breadcrumb'\n\texport default{\n        name : 'Collections',\n        components: {\n            AppSidebar , TabFilterRouter ,ListProducts , Pagination , ProductEmpty , ProductLoading ,error , breadcrumb\n        },\n        metaInfo() {\n            return {\n                title: this.meta.title,\n            }\n        },\n        data(){\n            return {\n                isLoading: false,\n                sortables : ['last' ,'trending' ,'price'],\n                collection_id : '',\n                products : [],\n                default_sort : 'last',\n                meta:{\n                    title : 'All Collections'\n                },\n                pagination : {\n                    limit : 20,\n                    total : 0,\n                    total_page : 0,\n                    current_page : 1,\n                },\n                error : false,\n                selectedCollection : null\n            }\n        },\n        computed: {\n            ...mapGetters({\n                collections : '$_Home/getCollections',\n                countries : '$_Home/getCountries'\n            }),\n            cumputeCollection(){\n                let collection_id = this.$route.params.id   ? this.$route.params.id : null\n                if( collection_id ){\n                    collection_id = this.getSlugId(collection_id)\n                    var collection = helper.findDeep(this.collections , 'id' , (item , id ) => id == collection_id)\n                    if( collection ){\n                        if( collection.level == 1){\n                            return {\n                                title : [\n                                    {\n                                        id : collection.id,\n                                        title : collection.title,  \n                                    }\n                                ],\n                                list : collection.childs,\n                                selected : collection.title,\n                                hasChild : collection.childs ? true : false\n                            }\n                        }else if( collection.level == 2){\n                            var object = {\n                                title : [],\n                                list : [],\n                                selected : collection.title,\n                                hasChild : collection.childs ? true : false\n                            }\n                            var level1 = helper.findDeep(this.collections , 'id' , (item , id ) => id == collection.parent_id)\n                            if( level1 ){\n                                object.title.push({\n                                    id : level1.id,\n                                    title : level1.title\n                                })\n                            }\n                            object.title.push({\n                                id : collection.id,\n                                title : collection.title\n                            })\n                            if( collection.childs ){\n                                object.list = collection.childs\n                            }\n                            return object\n                        }else if( collection.level == 3){\n                            var object = {\n                                title : [],\n                                list : [],\n                                selected : collection.title,\n                                hasChild : collection.childs ? true : false\n                            }\n                            var level2 = helper.findDeep(this.collections , 'id' , (item , id ) => id == collection.parent_id)\n                            if( level2 ){\n                                var level1 = helper.findDeep(this.collections , 'id' , (item , id ) => id == level2.parent_id)\n                                if( level1 ){\n                                    object.title.push({\n                                        id : level1.id,\n                                        title : level1.title\n                                    })\n                                }\n                                object.title.push({\n                                    id : level2.id,\n                                    title : level2.title\n                                })\n                            }\n                            object.title.push({\n                                id : collection.id,\n                                title : collection.title\n                            })\n                            return object\n                        }\n                        \n                    }\n                }else{\n                    return {\n                        title : [],\n                        list : this.collections,\n                        selected : null,\n                        hasChild : true\n                    }\n                }\n            }\n        },\n        methods: {\n            getProduct(to = null){\n                if( to == null){\n                    to = this.$route\n                }\n                let sort = to.query.sort ? to.query.sort : null \n                sort = this.checkSort(sort) ? sort : this.default_sort\n                /* get current_page */\n                let page = to.query.page   ? to.query.page : 1\n                if( page ) {\n                    page = helper.isNumeric(page) ? page : 1\n                }\n                /* get collection_id */\n                let collection_id = to.params.id   ? to.params.id : null\n                if( collection_id ) {\n                    collection_id = this.getSlugId(collection_id)\n                    var collection = helper.findDeep(this.collections , 'id' , (item , id ) => id == collection_id)\n                    if( collection ){\n                        this.setMeta(collection)\n                    }else{\n                        // this.error = true\n                        // return;\n                    }\n                }\n                /* get supplier_id */\n                let supplier_id = to.query.supplier_id  ? to.query.supplier_id : null \n                if( supplier_id ) {\n                    supplier_id = this.checkSupplier(supplier_id) ? supplier_id : null\n                }\n                /* get shipping_from */\n                let shipping_from = to.query.shipping_from ?  to.query.shipping_from : null\n                if( shipping_from ){\n                    shipping_from = this.checkCountry(shipping_from) ? shipping_from : null\n                }\n                /* get shipping_to */\n                let shipping_to = to.query.shipping_to  ? to.query.shipping_to : null\n                if( shipping_to ){\n                    shipping_to = this.checkCountry(shipping_to) ? shipping_to : null\n                }\n                /* get prices */\n                let prices = null\n                let price = to.query.prices \n                if( price ){\n                    var temp = price.split('-')\n                    if( temp.length == 2){\n                        var min = temp[0].trim()\n                        var max = temp[1].trim()\n                        if( helper.isNumeric(min) && helper.isNumeric(max) && parseInt(min) <= parseInt(max)){\n                            prices = price\n                        }\n                    }\n                }\n                return new Promise((resolve , reject )=>{\n                    this.$store.dispatch('$_Home/GET_LIST_PRODUCTS' , { \n                        sort : sort,\n                        collection_id: collection_id,\n                        page : page,\n                        supplier_id: supplier_id,\n                        shipping_from : shipping_from,\n                        shipping_to : shipping_to,\n                        prices : prices,\n                        limit : this.pagination.limit,\n                    }).then(res=>{\n                        let { status , data , pagination } = res\n                        if( status ){\n                            this.products = data\n                            this.pagination.total = parseInt(pagination.total) \n                            this.pagination.total_page = parseInt(pagination.total_page ) \n                            this.pagination.current_page = parseInt(pagination.current_page) \n                            \n                        }\n                    })\n                    resolve()\n                })\n            },\n            checkCountry(code){\n                return  _.find(this.countries , { code : code}) != undefined\n            },\n            checkSupplier(id){\n                return _.find(this.suppliers , { id : id}) != undefined\n            },\n            checkSort(sort){\n                return this.sortables.indexOf(sort) >= 0 \n            },\n            setMeta(collection){\n                if( collection ){\n                    this.meta.title = collection.title\n                }\n            },\n        },\n        beforeRouteUpdate : async function(to, from, next) {\n            this.isLoading = true\n            await this.getProduct(to)\n            this.isLoading = false\n            next()\n        },\n        created : async function(){\n            this.isLoading = true\n            var to = this.$route\n            var collection_id = this.getSlugId(to.params.id)\n            var findIndex = _.findIndex(this.collections , { id : collection_id})\n            if( findIndex >= 0 ){\n                var more = findIndex >= 10 ? true : false\n                this.$store.commit('$_Home/UPDATE_SIDEBAR_OPTION' , { collection_id : '' , more : more})\n            }else{\n                for (let index = 0; index < this.collections.length; index++) {\n                    const collection = this.collections[index]\n                    var child = _.find( collection.childs , {id : collection_id})\n                    if( child ){\n                        var more = index >= 10 ? true : false\n                        this.$store.commit('$_Home/UPDATE_SIDEBAR_OPTION' , { collection_id : child.parent_id , more : more})\n                        break\n                    }\n                }\n            }\n            this.$store.commit('$_Home/UPDATE_SIDEBAR_OPTION' , { collection_id : '' , more : false})\n            await this.getProduct(this.$route)\n            this.isLoading = false\n        }\n    }\n</script>\n<style lang=\"scss\" scoped>\n    @import 'src/assets/style';\n    .app-collection{\n        \n        &-container{\n            &-breadcrumb{\n                background: #f2f2f2;\n                padding: 15px 0;\n            }\n        }\n        &-row{\n\n        }\n        &-col{\n            &-sidebar{\n                max-width: 20%;\n            }\n            &-content{\n                max-width: 80%;\n            }\n        }\n    }\n</style>"],"sourceRoot":"src/modules/home/_components/collection"}]}