{"remainingRequest":"/Volumes/Document/Pau's test/pau's test FE/node_modules/vue-loader/lib/index.js??vue-loader-options!/Volumes/Document/Pau's test/pau's test FE/src/modules/seller/_components/your-store.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Volumes/Document/Pau's test/pau's test FE/src/modules/seller/_components/your-store.vue","mtime":1555387280276},{"path":"/Volumes/Document/Pau's test/pau's test FE/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/Document/Pau's test/pau's test FE/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Volumes/Document/Pau's test/pau's test FE/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Volumes/Document/Pau's test/pau's test FE/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport {mapActions} from 'vuex'\nimport helper from '@/plugins/helper'\nimport moment from 'moment'\n\nexport default {\n    name: \"your-store\",\n    data() {\n        return {\n            isInstallError: false,\n            isVerifyDone: false,\n            store_url: '',\n            isEmailValid: true,\n            shops: [],\n            selected_remove: '',\n            redirect_done: true,\n            redirect_loading: true,\n            isHaveErrorDialogMessage: false,\n            errorMessage: ''\n        }\n    },\n    methods: {\n        ...mapActions({\n            getShop: '$_Seller/GET_SHOPS',\n            addShop: '$_Seller/ADD_SHOPS',\n            shopify_verify: '$_Seller/SHOPIFY_VERIFY',\n            setDefaultShop: '$_Seller/SET_DEFAULT_STORE',\n            deleteShop: '$_Seller/DELETE_STORE',\n        }),\n        moment(date) {\n            return new moment(date)\n        },\n        setDefault(shop) {\n            this.setDefaultShop(shop.id).then(res => {\n                if (res.data.status) {\n                    $notify({\n                        content: `set ${shop.name} to default shop success`,\n                        type: 'success'\n                    });\n                    this.initShops();\n                }\n            })\n        },\n        changeTab: function (event) {\n            $('.active').removeClass('active')\n            $(event.target).parent('.store-item').addClass('active')\n            this.$emit('change_category', '')\n        },\n        showDialogAddShoptify() {\n            $('#myModal').modal('show')\n        },\n        removeShop() {\n            this.deleteShop(this.selected_remove.id).then(res => {\n                if (res.data.status) {\n                    $notify({\n                        content: `delete ${this.selected_remove.name} shop success`,\n                        type: 'success'\n                    });\n                    $('#RemoveConfirmDialog').modal('hide')\n                    this.initShops();\n                }\n            })\n        },\n        showRemoveConfirmDialog(shop) {\n            $('#RemoveConfirmDialog').modal('show')\n            this.selected_remove = shop;\n        },\n        addSellerStore() {\n            let pattern = /^(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\\.)+myshopify.com$/g\n            this.isEmailValid = pattern.test(String(this.store_url).toLowerCase());\n            if (this.isEmailValid) {\n                // $('#myModal').modal('hide')\n                this.redirect_done = false\n                // loading here\n                this.addShop({shop: this.store_url}).then(res => {\n                    if (res.data.status) {\n                        this.store_url = ''\n                        console.log(res.data);\n                        // this.$route.router.go(res.data.redirect);\n                        window.location.href = res.data.redirect\n                        // this.$router.go()\n                        // this.initShops()\n                    } else {\n                        this.redirect_done = true\n                        // $('#myModal').modal('hide')\n                        this.isHaveErrorDialogMessage = true\n                        this.errorMessage = res.data.message\n\n                    }\n                })\n            } else {\n                $('#myModal').modal('show')\n            }\n        },\n        initShops() {\n            this.getShop().then(res => {\n                if (res.data.status) {\n                    let temp = res.data.data;\n                    temp.forEach(function (el) {\n                        let chars = ''\n                        el.name.split(' ').forEach(function (el2) {\n                            if (chars.length < 2) {\n                                chars += el2[0].toUpperCase()\n                            }\n                        })\n                        el.avatar_name = chars\n                    })\n                    this.shops = res.data.data\n                    this.redirect_loading = false\n                    console.log(this.redirect_loading);\n                }\n            })\n        },\n        resetErrorMessaage() {\n            this.isHaveErrorDialogMessage = false\n            this.errorMessage = ''\n        }\n    },\n    watch: {\n        'isInstallError': function (value) {\n            if (this.isInstallError) {\n                $('#ErrorDialog').modal('show')\n            }\n        }\n    },\n    created: function () {\n        let isError = this.$route.query['install']\n        if (isError == 'error') {\n            this.isInstallError = true\n            this.initShops()\n        } else if (isError == 'success') {\n            let domain = this.$route.query['myshopify_domain'] ? this.$route.query['myshopify_domain'] : ''\n            let access_token = this.$route.query['access_token'] ? this.$route.query['access_token'] : ''\n            let temp = {\n                myshopify_domain: domain,\n                access_token: access_token\n            }\n            this.shopify_verify(temp).then(res => {\n                if (res.data.status) {\n                    // this.initShops()\n                    this.$router.push({\n                        name: \"YourStore\"\n                    })\n                    this.initShops()\n                } else {\n                    this.isInstallError = true\n                    this.initShops()\n                }\n            })\n        } else {\n            this.initShops()\n        }\n    }\n}\n",{"version":3,"sources":["your-store.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkIA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"your-store.vue","sourceRoot":"src/modules/seller/_components","sourcesContent":["<template>\n    <div class=\"your-store-container\">\n        <div v-if=\"!redirect_loading\" class=\"store-list\">\n            <ul class=\"row\">\n                <li class=\"col col-md-4\" v-for=\"item in shops\">\n                    <div class=\"store-item\">\n                        <div class=\"img-container\">\n                            <!--<img src=\"../../../assets/images/default/avatar.png\" alt=\"\">-->\n                            <span class=\"avatar-name\">\n                                 {{item.avatar_name}}\n                            </span>\n                        </div>\n                        <div class=\"store-info\">\n                            <a href=\"#\">{{item.name}} <span v-if=\"item.shop_default\"><i\n                                    class=\"far fa-shield-check text-success m-r-5\"></i> <span class=\"text-success\">default</span></span></a>\n                            <span>Imported product: {{item.imported_product}}</span>\n                            <span class=\"date-info\">Added at {{moment(item.created_at).format('LLL')}}</span>\n                            <div class=\"store-action\" v-if=\"!item.shop_default\">\n                                <span><a @click.prevent=\"setDefault(item)\">set</a></span>\n                                <a @click.prevent=\"showRemoveConfirmDialog(item)\">remove</a>\n                            </div>\n                        </div>\n                    </div>\n                </li>\n                <li class=\"col col-md-4\">\n                    <div class=\"store-item\" @click=\"changeTab\">\n                        <div class=\"img-container\">\n                            <div class=\"plus-icon\" @click=\"showDialogAddShoptify\">\n                                <i class=\"fal fa-plus\"></i>\n                            </div>\n                        </div>\n                        <div class=\"store-info text-warning\">\n                            Add more store\n                        </div>\n                    </div>\n                </li>\n            </ul>\n        </div>\n        <div v-else class=\"text-center\">\n            <div class=\"lds-dual-ring type2\"></div>\n        </div>\n        <div class=\"modal fade\" id=\"ErrorDialog\" role=\"dialog\">\n            <div class=\"dialog-add-shoptify modal-dialog modal-md\">\n                <div class=\"modal-content\">\n                    <div class=\"modal-body\">\n                        <p class=\"add-shoptify-title-dialog text-danger m-b-50\">You install error</p>\n                        <div class=\"dialog-action\">\n                            <button type=\"button\" class=\"btn btn-default btn-outline-secondary  btn-radius-border\"\n                                    data-dismiss=\"modal\">Close\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <!--<div class=\"category-action\">-->\n        <!--<button @click=\"test\" class=\"save-category btn btn-warning btn-radius-border\">-->\n        <!--Save-->\n        <!--</button>-->\n        <!--</div>-->\n        <div class=\"modal fade\" id=\"myModal\" role=\"dialog\">\n            <div class=\"dialog-add-shoptify modal-dialog  modal-lg\">\n                <div class=\"modal-content\">\n                    <form @submit.stop.prevent=\"addSellerStore()\">\n                        <div class=\"modal-body\">\n                            <p class=\"add-shoptify-title-dialog\">Please enter your Shopify URL</p>\n                            <div class=\"shoptify-link-container\">\n                                <div class=\"form-group col col-5\">\n                                    <input :class=\"{'is-invalid': !isEmailValid}\" v-model=\"store_url\"\n                                           class=\"form-control outline-type\"\n                                           placeholder=\"Example: dropsquare.myshopify.com\"/>\n                                    <div v-if=\"!isEmailValid\" class=\"invalid-feedback\">Email is invalid</div>\n                                </div>\n                                <span v-if=\"isHaveErrorDialogMessage\" class=\"text-danger\">{{errorMessage}}</span>\n                            </div>\n                            <div class=\"dialog-action\">\n                                <button @click=\"addSellerStore\"\n                                        class=\"btn btn-warning btn-radius-border m-t-25 text-white\">\n                                    Login\n                                    <div v-if=\"!redirect_done\" class=\"lds-dual-ring\"></div>\n                                </button>\n                            </div>\n                            <div class=\"dialog-hepper m-t-25\">\n                                <div>\n                                    <a class=\"text-warning\">\n                                        Click here to create your own store if you havenâ€™t use Shopify yet\n                                    </a>\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"15.076\" height=\"17.143\"\n                                         viewBox=\"0 0 15.076 17.143\">\n                                        <g id=\"Group_263\" data-name=\"Group 263\" transform=\"translate(0 0)\">\n                                            <path id=\"Path_401\" data-name=\"Path 401\"\n                                                  d=\"M13.2,3.332a.16.16,0,0,0-.151-.138c-.069,0-1.377-.1-1.377-.1s-.909-.909-1.019-1.005a.408.408,0,0,0-.372-.041c-.014,0-.207.055-.509.151-.3-.881-.84-1.694-1.79-1.694H7.9A1.157,1.157,0,0,0,7.008,0C4.791,0,3.731,2.767,3.4,4.172c-.854.262-1.473.454-1.542.482-.482.151-.5.165-.551.62C1.253,5.6,0,15.31,0,15.31l9.776,1.831L15.076,16S13.218,3.428,13.2,3.332ZM9.225,2.368c-.248.083-.523.165-.826.262V2.451a4.36,4.36,0,0,0-.193-1.336C8.7,1.17,9.018,1.721,9.225,2.368ZM7.6,1.212A4.072,4.072,0,0,1,7.82,2.7v.1c-.537.165-1.129.344-1.707.523A2.958,2.958,0,0,1,7.6,1.212ZM6.939.592a.485.485,0,0,1,.289.1,3.671,3.671,0,0,0-1.79,2.85c-.468.151-.922.289-1.349.413C4.461,2.671,5.356.592,6.939.592Z\"\n                                                  transform=\"translate(0 0)\" fill=\"#ffb011\"/>\n                                            <path id=\"Path_402\" data-name=\"Path 402\"\n                                                  d=\"M74.277,15.87c-.069,0-1.377-.1-1.377-.1s-.909-.909-1.019-1.005a.262.262,0,0,0-.138-.069L71,29.818l5.3-1.143S74.442,16.1,74.428,16.022A.189.189,0,0,0,74.277,15.87Z\"\n                                                  transform=\"translate(-61.224 -12.676)\" fill=\"#ffd071\"/>\n                                            <path id=\"Path_403\" data-name=\"Path 403\"\n                                                  d=\"M22.459,42.862,21.812,44.8a3.07,3.07,0,0,0-1.28-.3c-1.033,0-1.074.647-1.074.812,0,.881,2.313,1.225,2.313,3.3A2.444,2.444,0,0,1,19.333,51.3,3.371,3.371,0,0,1,16.8,50.255l.454-1.487a3.208,3.208,0,0,0,1.625.757.664.664,0,0,0,.688-.661c0-1.157-1.9-1.212-1.9-3.112a3.163,3.163,0,0,1,3.47-3.153A2.77,2.77,0,0,1,22.459,42.862Z\"\n                                                  transform=\"translate(-14.487 -36.735)\" fill=\"#fff\"/>\n                                        </g>\n                                    </svg>\n                                </div>\n                            </div>\n                        </div>\n                    </form>\n                </div>\n            </div>\n        </div>\n        <div class=\"modal fade show\" id=\"RemoveConfirmDialog\" role=\"dialog\">\n            <div class=\"dialog-add-shoptify modal-dialog modal-lg\">\n                <div class=\"modal-content\">\n                    <div class=\"modal-body\">\n                        <p class=\"add-shoptify-title-dialog m-b-50\">Are you sure remove this store ?</p>\n                        <div class=\"dialog-action\">\n                            <button type=\"button\"\n                                    class=\"m-r-20 btn btn-default btn-outline-secondary  btn-radius-border\"\n                                    data-dismiss=\"modal\">Close\n                            </button>\n                            <button type=\"button\" class=\"btn btn-default btn-danger  btn-radius-border\"\n                                    @click=\"removeShop\">Confirm\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n    import {mapActions} from 'vuex'\n    import helper from '@/plugins/helper'\n    import moment from 'moment'\n\n    export default {\n        name: \"your-store\",\n        data() {\n            return {\n                isInstallError: false,\n                isVerifyDone: false,\n                store_url: '',\n                isEmailValid: true,\n                shops: [],\n                selected_remove: '',\n                redirect_done: true,\n                redirect_loading: true,\n                isHaveErrorDialogMessage: false,\n                errorMessage: ''\n            }\n        },\n        methods: {\n            ...mapActions({\n                getShop: '$_Seller/GET_SHOPS',\n                addShop: '$_Seller/ADD_SHOPS',\n                shopify_verify: '$_Seller/SHOPIFY_VERIFY',\n                setDefaultShop: '$_Seller/SET_DEFAULT_STORE',\n                deleteShop: '$_Seller/DELETE_STORE',\n            }),\n            moment(date) {\n                return new moment(date)\n            },\n            setDefault(shop) {\n                this.setDefaultShop(shop.id).then(res => {\n                    if (res.data.status) {\n                        $notify({\n                            content: `set ${shop.name} to default shop success`,\n                            type: 'success'\n                        });\n                        this.initShops();\n                    }\n                })\n            },\n            changeTab: function (event) {\n                $('.active').removeClass('active')\n                $(event.target).parent('.store-item').addClass('active')\n                this.$emit('change_category', '')\n            },\n            showDialogAddShoptify() {\n                $('#myModal').modal('show')\n            },\n            removeShop() {\n                this.deleteShop(this.selected_remove.id).then(res => {\n                    if (res.data.status) {\n                        $notify({\n                            content: `delete ${this.selected_remove.name} shop success`,\n                            type: 'success'\n                        });\n                        $('#RemoveConfirmDialog').modal('hide')\n                        this.initShops();\n                    }\n                })\n            },\n            showRemoveConfirmDialog(shop) {\n                $('#RemoveConfirmDialog').modal('show')\n                this.selected_remove = shop;\n            },\n            addSellerStore() {\n                let pattern = /^(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\\.)+myshopify.com$/g\n                this.isEmailValid = pattern.test(String(this.store_url).toLowerCase());\n                if (this.isEmailValid) {\n                    // $('#myModal').modal('hide')\n                    this.redirect_done = false\n                    // loading here\n                    this.addShop({shop: this.store_url}).then(res => {\n                        if (res.data.status) {\n                            this.store_url = ''\n                            console.log(res.data);\n                            // this.$route.router.go(res.data.redirect);\n                            window.location.href = res.data.redirect\n                            // this.$router.go()\n                            // this.initShops()\n                        } else {\n                            this.redirect_done = true\n                            // $('#myModal').modal('hide')\n                            this.isHaveErrorDialogMessage = true\n                            this.errorMessage = res.data.message\n\n                        }\n                    })\n                } else {\n                    $('#myModal').modal('show')\n                }\n            },\n            initShops() {\n                this.getShop().then(res => {\n                    if (res.data.status) {\n                        let temp = res.data.data;\n                        temp.forEach(function (el) {\n                            let chars = ''\n                            el.name.split(' ').forEach(function (el2) {\n                                if (chars.length < 2) {\n                                    chars += el2[0].toUpperCase()\n                                }\n                            })\n                            el.avatar_name = chars\n                        })\n                        this.shops = res.data.data\n                        this.redirect_loading = false\n                        console.log(this.redirect_loading);\n                    }\n                })\n            },\n            resetErrorMessaage() {\n                this.isHaveErrorDialogMessage = false\n                this.errorMessage = ''\n            }\n        },\n        watch: {\n            'isInstallError': function (value) {\n                if (this.isInstallError) {\n                    $('#ErrorDialog').modal('show')\n                }\n            }\n        },\n        created: function () {\n            let isError = this.$route.query['install']\n            if (isError == 'error') {\n                this.isInstallError = true\n                this.initShops()\n            } else if (isError == 'success') {\n                let domain = this.$route.query['myshopify_domain'] ? this.$route.query['myshopify_domain'] : ''\n                let access_token = this.$route.query['access_token'] ? this.$route.query['access_token'] : ''\n                let temp = {\n                    myshopify_domain: domain,\n                    access_token: access_token\n                }\n                this.shopify_verify(temp).then(res => {\n                    if (res.data.status) {\n                        // this.initShops()\n                        this.$router.push({\n                            name: \"YourStore\"\n                        })\n                        this.initShops()\n                    } else {\n                        this.isInstallError = true\n                        this.initShops()\n                    }\n                })\n            } else {\n                this.initShops()\n            }\n        }\n    }\n</script>\n\n<style lang=\"scss\" scoped>\n    @import 'src/assets/style';\n    @import '../css/add-store-dialog';\n\n    .your-store-container {\n        .store-list {\n            ul {\n                padding: 0px;\n                list-style-type: none;\n                li {\n                    margin-top: 15px;\n                    margin-bottom: 15px;\n                    .store-item {\n                        /*background: white;*/\n                        display: flex;\n                        padding: 0px;\n                        border-radius: 10px;\n                        border: solid 3px transparent;\n                        .img-container {\n                            /*max-height: 70px;*/\n                            /*max-width: 70px;*/\n                            height: 70px;\n                            width: 70px;\n                            border-radius: 50%;\n                            padding: 4px;\n                            text-align: center;\n                            display: flex;\n                            flex-direction: column;\n                            justify-content: space-around;\n\n                            .plus-icon {\n                                border-radius: 100%;\n                                border: 1px solid $yellow;\n                                /*width: 55.8px;*/\n                                /*height: 55.8px;*/\n                                width: 90%;\n                                height: 90%;\n                                margin: auto;\n                                position: relative;\n                                &:hover {\n                                    cursor: pointer;\n                                }\n                                i {\n                                    font-size: 20px;\n                                    color: $yellow;\n                                    position: absolute;\n                                    top: 50%;\n                                    left: 50%;\n                                    transform: translate(-50%, -50%);\n                                }\n                            }\n                        }\n                        .avatar-name {\n                            width: 90%;\n                            height: 90%;\n                            margin: auto;\n                            background: #EDEFF1;\n                            color: #A4AFB7;\n                            /*border: solid 1px lightgrey;*/\n                            border-radius: 100%;\n                            display: flex;\n                            flex-direction: column;\n                            justify-content: space-around;\n                            font-size: 22px;\n                        }\n                        .store-info {\n                            display: flex;\n                            flex-direction: column;\n                            justify-content: space-around;\n                            .date-info {\n                                color: #C9C9C9;\n                            }\n                            a {\n                                font-weight: lighter;\n                                .far {\n                                    font-weight: 300;\n                                }\n                            }\n                            .store-action {\n                                display: flex;\n                                a:nth-child(2) {\n                                    color: $yellow;\n                                }\n                                span {\n                                    flex: 1;\n                                }\n                            }\n                        }\n                    }\n                }\n            }\n        }\n        .category-action {\n            .save-category {\n                width: 100px;\n                color: white\n            }\n        }\n        .error-install-message {\n            text-align: center;\n            font-size: 30px;\n        }\n    }\n\n    .lds-dual-ring {\n        display: inline-block;\n        width: 18px;\n        height: 18px;\n        vertical-align: middle;\n        margin-left: 10px;\n        &.type2 {\n            width: 120px;\n            height: 120px;\n            margin: auto;\n        }\n        /*position: a;*/\n    }\n\n    .lds-dual-ring:after {\n        content: \" \";\n        display: block;\n        width: 17px;\n        height: 16px;\n        margin: 1px;\n        border-radius: 50%;\n        border: 5px solid #fff;\n        border-color: #fff transparent #fff transparent;\n        animation: lds-dual-ring 1.2s linear infinite;\n    }\n\n    .type2:after {\n        content: \" \";\n        display: block;\n        border-radius: 50%;\n        width: 100px;\n        height: 100px;\n        margin: auto;\n        border: 5px solid $yellow;\n        border-color: $yellow transparent $yellow transparent;\n    }\n\n    @keyframes lds-dual-ring {\n        0% {\n            transform: rotate(0deg);\n        }\n        100% {\n            transform: rotate(360deg);\n        }\n    }\n\n</style>\n"]}]}